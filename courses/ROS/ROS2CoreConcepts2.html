<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- meta tags -->
    <title>ROS (Robot Operating System) Course - Dr. Vijay Kumar Jadon</title>
    <meta
      name="title"
      content="ROS (Robot Operating System) Course - Dr. Vijay Kumar Jadon"
    />
    <meta
      name="description"
      content="ROS is a meta (after or beyond) operating system that runs on the existing operating system. It provides a set of tools, libraries, and conventions that make it easier to develop, test, and deploy robot systems."
    />
    <!-- css -->
    <link rel="stylesheet" type="text/css" href="../css/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../css/theme.css" />
    <link rel="stylesheet" type="text/css" href="../css/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../css/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../css/tabs.css" />
    <!-- custom css -->
    <link rel="stylesheet" href="css/custom.css" />
    <link rel="shortcut icon" href="../img/ROS.png" />
    <script src="../js/jquery.js"></script>
    <script src="../js/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../js/documentation_options.js"></script>
    <script src="../js/doctools.js"></script>
    <script src="../js/sphinx_highlight.js"></script>
    <script src="../js/clipboard.min.js"></script>
    <script src="../js/copybutton.js"></script>
    <script src="../js/theme.js"></script>
    <!-- For Syntax highlighting -->
    <!-- Prism.js -->
    <link rel="stylesheet" href="../prism/prism.css" />
    <script async src="../prism/prism.js"></script>
    <!-- Clipboard.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
  </head>

  <body class="wy-body-for-nav">
    <div class="wy-grid-for-nav">
      <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
          <div class="wy-side-nav-search">
            <a href="/index.html" class="icon icon-home">
              ROS (Robot Operating System) - Dr. Vijay Kumar Jadon
              <img
                src="../img/ROS.png"
                class="logo"
                alt="Dr. Vijay Kumar Jadon ROS Logo"
              />
            </a>
          </div>
          <div
            class="wy-menu wy-menu-vertical"
            data-spy="affix"
            role="navigation"
            aria-label="Navigation menu"
          >
            <ul class="current">
              <!-- Introduction -->
              <li class="toctree-l1">
                <a class="reference internal" href="introduction.html"
                  >Introduction</a
                >
                <ul>
                  <!-- Robots -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="introduction.html#Robots"
                      >Robots</a
                    >
                    <ul>
                      <!-- Characteristics of Robots -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#CharacteristicsofRobots"
                          >Characteristics of Robots</a
                        >
                      </li>
                      <!-- Major Components of Robot -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#MajorComponentsofRobot"
                          >Major Components of Robot</a
                        >
                      </li>
                      <!-- Multidisciplinary Knowledge -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#MultidisciplinaryKnowledge"
                          >Multidisciplinary Knowledge</a
                        >
                      </li>
                      <!-- Autonomous Robots -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#AutonomousRobots"
                          >Autonomous Robots</a
                        >
                      </li>
                    </ul>
                  </li>

                  <!-- Why ROS -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="introduction.html#WhyROS"
                      >ROS</a
                    >
                    <ul>
                      <!-- Why ROS -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#WhyROS"
                          >Why ROS</a
                        >
                      </li>
                      <!-- Robot Operating System -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#RobotOperatingSystem"
                          >Robot Operating System</a
                        >
                      </li>
                      <!-- Robot Integration Capabilities -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#RobotIntegrationCapabilities"
                          >Robot Integration Capabilities</a
                        >
                      </li>
                      <!-- Currently Supported Distributions -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#CurrentlySupportedDistributions"
                          >Currently Supported Distributions</a
                        >
                      </li>
                      <!-- About ROS Features -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#AboutROSFeatures"
                          >About ROS Features</a
                        >
                      </li>
                      <!-- ROS Applications -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#ROSApplications"
                          >ROS Applications</a
                        >
                      </li>
                      <!-- ROS2 Concepts, Tools and Technologies -->
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="introduction.html#ROS2ConceptsToolsandTechnologies"
                          >ROS2 Concepts, Tools and Technologies</a
                        >
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>

              <!-- Installation -->
              <li class="toctree-l1">
                <a class="reference internal" href="installation.html"
                  >Installation</a
                >
                <ul>
                  <!-- Installation Guide -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="installation.html#DocsInstallationGuide"
                      >Installation Guide</a
                    >
                    <!-- Docs : Installation Guide -->
                  </li>

                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="installation.html#DocsInstallationGuide"
                      >Docs : Installation Guide</a
                    >
                  </li>
                  <!-- Ubuntu -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="installation.html#Ubuntu"
                      >Ubuntu</a
                    >
                  </li>
                  <!-- Download -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="installation.html#Download"
                      >Download</a
                    >
                  </li>
                  <!-- Bootable Drive -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="installation.html#BootableDrive"
                      >Bootable Drive</a
                    >
                  </li>
                  <!-- Creating Virtual Machine -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="installation.html#CreatingVirtualMachine"
                      >Creating Virtual Machine</a
                    >
                  </li>
                  <!-- Command : sudo -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="installation.html#Commandsudo"
                      >Command : sudo</a
                    >
                  </li>
                </ul>
              </li>

              <!-- ROS2 Installation Using Docker -->
              <li class="toctree-l1">
                <a class="reference internal" href="ROS2InstallationDocker.html"
                  >ROS2 Installation Docker</a
                >
                <ul>
                  <!-- Docker and Container -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="ROS2InstallationDocker.html#DockerandContainer"
                      >Docker and Container</a
                    >
                  </li>
                  <!-- Setting-Up Docker and Container -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="ROS2InstallationDocker.html#SettingUpDockerandContainer"
                      >Setting-Up Docker and Container</a
                    >
                  </li>
                  <!-- Setting-Up Docker for ROS -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="ROS2InstallationDocker.html#SettingUpDockerforROS"
                      >Setting-Up Docker for ROS</a
                    >
                  </li>
                </ul>
              </li>

              <!-- Linux -->
              <li class="toctree-l1">
                <a class="reference internal" href="linux.html">Linux</a>
                <ul>
                  <!-- Terminal Commands -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="linux.html#TerminalCommands"
                      >Terminal Commands</a
                    >

                    <!-- Terminal/Shell/Bash -->
                  </li>

                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="linux.html#TerminalShellBash"
                      >Terminal/Shell/Bash</a
                    >
                  </li>
                  <!-- Syntax of Shell Command -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="linux.html#SyntaxofShellCommand"
                      >Syntax of Shell Command</a
                    >
                  </li>
                  <!-- TerminalC -->
                  <li class="toctree-l2">
                    <a class="reference internal" href="linux.html#TerminalC"
                      >Terminal Commands</a
                    >
                  </li>

                  <!-- Skill Task -->
                  <li class="toctree-l2">
                    <a class="reference internal" href="linux.html#SkillTask"
                      >Skill Task</a
                    >
                  </li>

                  <!-- Copy (cp) Command -->
                  <li class="toctree-l2">
                    <a class="reference internal" href="linux.html#CopyCommand"
                      >Copy (cp) Command</a
                    >
                  </li>

                  <!-- Skill Task -->
                  <li class="toctree-l2">
                    <a class="reference internal" href="linux.html#SkillTask2"
                      >Skill Task</a
                    >
                  </li>

                  <!-- Move (mv) and Remove (rm) Commands -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="linux.html#MoveRemoveCommands"
                      >Move (mv) and Remove (rm) Commands</a
                    >
                  </li>

                  <!-- Change Mode : chmod -->
                  <li class="toctree-l2">
                    <a class="reference internal" href="linux.html#chmod"
                      >Change Mode : chmod</a
                    >
                  </li>

                  <!-- Redirection Operators (> and >>) -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="linux.html#RedirectionOperators"
                      >Redirection Operators (> and >>)</a
                    >
                  </li>

                  <!-- Terminal Commands -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="linux.html#TerminalCommands4"
                      >Terminal Commands</a
                    >
                  </li>

                  <!-- Command : pipe (|), grep, printenv, &&, || -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="linux.html#Commandpipegrepprintenv"
                      >Command : pipe (|), grep, printenv, &&, ||</a
                    >
                  </li>

                  <!-- Command -->
                  <li class="toctree-l2">
                    <a class="reference internal" href="linux.html#Command"
                      >Command</a
                    >
                  </li>

                  <!-- Virtual Environment -->
                  <li class="toctree-l2">
                    <a
                      class="reference internal"
                      href="linux.html#VirtualEnvironment"
                      >Virtual Environment</a
                    >
                  </li>

                  <!-- Quoting -->
                  <li class="toctree-l2">
                    <a class="reference internal" href="linux.html#Quoting"
                      >Quoting</a
                    >
                  </li>

                  <!-- Secure Shell (ssh) -->
                  <li class="toctree-l2">
                    <a class="reference internal" href="linux.html#SecureShell"
                      >Secure Shell (ssh)</a
                    >
                  </li>
                </ul>
              </li>

              <!-- ROS2CoreConcepts -->
              <li>
                <a href="ROS2CoreConcepts.html" class="toctree-l1"
                  >ROS 2 Core Concepts</a
                >
                <ul>
                  <!-- Python Package -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts.html#PythonPackage"
                      class="reference internal"
                      >Python Package</a
                    >
                  </li>
                  <!-- Executing Node as Python Script -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts.html#ExecutingNodeasPythonScript"
                      class="reference internal"
                      >Executing Node as Python Script</a
                    >
                  </li>
                  <!-- Executing the Script as Python Package -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts.html#ExecutingtheScriptasPythonPackage"
                      class="reference internal"
                      >Executing the Script as Python Package</a
                    >
                  </li>
                  <!-- Building with --symlink-install -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts.html#Buildingwith--symlink-install"
                      class="reference internal"
                      >Building with --symlink-install</a
                    >
                  </li>
                  <!-- Setting '--symlink-install' Default -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts.html#Setting--symlink-installDefault"
                      class="reference internal"
                      >Setting '--symlink-install' Default</a
                    >
                  </li>
                  <!-- Creating Python Node -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts.html#CreatingPythonNode"
                      class="reference internal"
                      >Creating Python Node</a
                    >
                  </li>
                  <!-- ROS2 Commands : 'list' and 'info' -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts.html#ROS2Commandslistandinfo"
                      class="reference internal"
                      >ROS2 Commands : 'list' and 'info'</a
                    >
                  </li>
                  <!-- Using Domain ID and Localhost -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts.html#UsingDomainIDandLocalhost"
                      class="reference internal"
                      >Using Domain ID and Localhost</a
                    >
                  </li>
                  <!-- ROS2 Messages -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts.html#ROS2Messages"
                      class="reference internal"
                      >ROS2 Messages</a
                    >
                  </li>
                </ul>
              </li>

              <!-- ROS2 Core Concepts Part-2 -->
              <li>
                <a href="ROS2CoreConcepts2.html" class="toctree-l1"
                  >ROS2 Core Concepts Part-2</a
                >
                <ul>
                  <!-- Sample Node Publisher - Subscriber -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts2.html#SampleNodePublisherSubscriber"
                      class="reference internal"
                      >Sample Node Publisher - Subscriber</a
                    >
                  </li>
                  <!-- Sample Publisher Node Script -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts2.html#SamplePublisherNodeScript"
                      class="reference internal"
                      >Sample Publisher Node Script</a
                    >
                  </li>
                  <!-- ROS2 Program Structure -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts2.html#ROS2ProgramStructure"
                      class="reference internal"
                      >ROS2 Program Structure</a
                    >
                  </li>
                  <!-- Executing Sample Publisher Node -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts2.html#ExecutingSamplePublisherNode"
                      class="reference internal"
                      >Executing Sample Publisher Node</a
                    >
                  </li>
                  <!-- Skill Task -->
                  <li class="toctree-l2">
                    <a
                      href="ROS2CoreConcepts2.html#SkillTask"
                      class="reference internal"
                      >Skill Task</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Right Section -->
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <nav class="wy-nav-top" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="/index.html">Dr. Vijay Kumar Jadon</a>
        </nav>

        <div class="wy-nav-content">
          <div class="rst-content">
            <div role="navigation" aria-label="Page navigation">
              <ul class="wy-breadcrumbs">
                <li>
                  <a
                    href="/index.html"
                    class="icon icon-home"
                    aria-label="Home"
                  ></a>
                </li>
                <li class="breadcrumb-item active">
                  ROS (Robot Operating System) Course - Dr. Vijay Kumar Jadon
                </li>
                <li class="wy-breadcrumbs-aside">
                  <a
                    href="https://github.com/vkjadon"
                    class="fa fa-github"
                    target="_blank"
                  >
                    GitHub</a
                  >
                </li>
              </ul>
              <hr />
            </div>
            <div
              role="main"
              class="document"
              itemscope="itemscope"
              itemtype="http://schema.org/Article"
            >
              <section itemprop="articleBody">
                <section id="ROS2CoreConceptsPart2">
                  <span id="id1"></span>
                  <!-- ROS2 Core Concepts Part-2 -->
                  <h1>
                    ROS2 Core Concepts Part-2 [Creating Python Node with Package
                    Create]<a
                      class="headerlink"
                      href="#ROS2CoreConceptsPart2"
                      title="Link to this heading"
                      ></a
                    >
                  </h1>
                  <img
                    src="../img/ROS2.png"
                    alt="ROS (Robot Operating System)"
                    class="img-width-600px"
                  />
                  <p>
                    We can also create a package with a sample node using the
                    <span class="font-bold color-red">--node-name</span> option
                  </p>
                  <pre class="language-bash"><code>~/ros2_ws/src $ ros2 pkg create --build-type ament_python --node-name sample_node test_pkg_with_node</code></pre>
                  <p>Check the <span class="color-blue font-bold">setup.py</span> and note the entry points is already populated with a executable name as Remove this package by removing the directory. We will add some more options before executing the sample node.</p>
                  <pre class="language-bash"><code>~/ros2_ws/src $ rm -rf test_pkg_with_node</code></pre>
                  <p>Add the dependencies of "<span class="font-bold">rclpy</span>" and "<span class="font-bold">std_msgs</span>". We are assuming these modules are required in addition to standard python packages to run the node.</p>
                  <pre class="language-bash"><code>~/ros2_ws/src $ ros2 pkg create --build-type ament_python --dependencies rclpy std_msgs --node-name sample_node test_pkg_with_node</code></pre>
                  <p>Check the <span class="color-blue font-bold">setup.py</span> and <span class="color-blue font-bold">package.xml</span>. <span class="color-red font-bold italic">Build and run the node</span></p>
                  <pre class="language-bash"><code>~/ros2_ws $ colcon build --packages-select test_pkg_with_node</code></pre>
                  <pre class="language-bash"><code>~/ros2_ws $ ros2 run test_pkg_with_node sample_node</code></pre>
                  <p class="border-2px-solid-red"><span class="italic">Do not forget to source the <span class="color-blue">setup.bash</span> or <span class="color-blue">local_setup.bash</span></span> before executing the node</p>
                  <h2>Quick Concepts</h2>
                  <p>Always create package in the <span class="color-blue font-bold">src</span> folder.</p>
                  <p>Always build a package in the <span class="color-blue font-bold">Workspace (ros2_ws)</span> folder.</p>
                  <p>Add entry points in <span class="color-blue font-bold">setup.py</span> and dependencies in <span class="color-blue font-bold">package.xml</span> after adding any node in the package.</p>
                  <p>Always build after making any change in the files of the package. No need, if you use <span class="color-blue font-bold">--symlink-install</span></p>
                    <p>Source <span class="color-blue font-bold">setup.bash</span> or <span class="color-blue font-bold">local_setup.bash</span> after you build a package.</p> 
                </section>

                <!-- Sample Node Publisher - Subscriber -->
                <section id="SampleNodePublisherSubscriber">
                    <h2>Sample Node Publisher - Subscriber<a
                        class="headerlink"
                        href="#SampleNodePublisherSubscriber"
                        title="Link to this heading"
                        ></a>
                    </h2>
                    <p><a href="https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html" class="txt-underline">https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html</a></p>
                    <pre class="language-python"><code>import rclpy
from rclpy.node import Node

from std_msgs.msg import String

class MinimalPublisher(Node):</code></pre>
                    <p>Copy in <span class="color-blue font-bold">ros2_ws/src/test_pkg/test_pkg</span> as <span class="color-blue font-bold">test_publisher.py</span></p>

                    <pre class="language-python"><code>import rclpy
from rclpy.node import Node
                        
from std_msgs.msg import String
                        
class MinimalSubscriber(Node):</code></pre>
                    <p>Copy in <span class="color-blue font-bold">ros2_ws/src/test_pkg/test_pkg</span> as <span class="color-blue font-bold">test_subscriber.py</span></p>

                    <pre class="language-bash"><code>~/ros2_ws $ cd src/test_pkg/test_pkg</code></pre>
                    <pre class="language-bash"><code>/test_pkg$ wget https://raw.githubusercontent.com/vkjadon/ros2/master/test_publisher.py</code></pre>
                </section>

                <section id="SamplePublisherNodeScript">
                    <h2>Sample Publisher Node Script<a
                        class="headerlink"
                        href="#SamplePublisherNodeScript"
                        title="Link to this heading"
                        ></a>
                    </h2>
                    <pre class="language-python"><code>import sys

import rclpy
from rclpy.executors import ExternalShutdownException
from rclpy.node import Node

from std_msgs.msg import String

class MinimalPublisher(Node):

    def __init__(self):
        super().__init__('pubroot')
        self.publisher_ = self.create_publisher(String, 'topic', 10)
        timer_period = 0.5  # seconds
        self.timer = self.create_timer(timer_period, self.timer_callback)
        self.i = 0

    def timer_callback(self):
        msg = String()
        msg.data = 'Hello World: %d' % self.i
        self.publisher_.publish(msg)
        self.get_logger().info('Publishing: "%s"' % msg.data)
        self.i += 1

def main(args=None):
    rclpy.init()

    try:
        minimal_publisher = MinimalPublisher()

        rclpy.spin(minimal_publisher)
    except KeyboardInterrupt:
        pass
    except ExternalShutdownException:
        sys.exit(1)

if __name__ == '__main__':
    main()
                    </code></pre>
                    <p>Github Repository Link of <span class="color-blue font-bold">test_pkg</span> : <a href="https://github.com/vkjadon/test_pkg" class="txt-underline">https://github.com/vkjadon/test_pkg</a></p>
                    <p>Raw Link of <span class="color-blue font-bold">test_publisher.py</span> : <a href="https://raw.githubusercontent.com/vkjadon/test_pkg/refs/heads/main/test_pkg/test_publisher.py" class="txt-underline">https://raw.githubusercontent.com/vkjadon/test_pkg/refs/heads/main/test_pkg/test_publisher.py</a></p>
                    <a href="https://github.com/ros2/examples/tree/rolling/rclpy/topics" class="txt-underline">https://github.com/ros2/examples/tree/rolling/rclpy/topics</a>
                    <p><span class="color-red font-bold">rclpy</span> is a Python client library for ROS 2 (Robot Operating System 2) that provides a Python interface to the underlying ROS 2 middleware.</p>
                    <a href="https://docs.ros2.org/foxy/api/rclpy/index.html" class="txt-underline">https://docs.ros2.org/foxy/api/rclpy/index.html</a>
                </section>


                <section id="ROS2ProgramStructure">
                    <h2>ROS2 Program Structure<a
                        class="headerlink"
                        href="#ROS2ProgramStructure"
                        title="Link to this heading"
                        ></a>
                    </h2>
                    <p><a href="https://github.com/ros2/examples/tree/rolling/rclpy/topics" class="txt-underline">https://github.com/ros2/examples/tree/rolling/rclpy/topics</a></p>
                    <h3>Import Section</h3>
                    <p>There are two dependencies: 1. <span class="color-blue font-bold">rclpy</span> and 2. <span class="color-blue font-bold">std_msgs</span></p>
                    <pre class="language-python"><code>import sys

import rclpy
from rclpy.executors import ExternalShutdownException
from rclpy.node import Node
                        
from std_msgs.msg import String</code></pre>
                    <h3>Main Method</h3>
                    <p>A typical ROS program consists of the following operations :</p>
                    <ul>
                        <li><span class="color-red font-bold">Initialization</span>: Initialization is done by calling <span class="color-blue italic font-bold txt-underline">init()</span>. This is done before any ROS nodes is created.</li>
                        <li><span class="color-red font-bold">Create ROS nodes</span>: Creating a ROS node by calling <span class="color-blue italic font-bold txt-underline">create_node()</span> or by instantiating a <span class="color-blue italic font-bold txt-underline">Node</span>. It creates publishers, subscriptions, services, and actions etc.</li>
                        <li><span class="color-red font-bold">Process node callbacks</span>: The <span class="color-blue italic font-bold txt-underline">spin()</span> start this loop, and blocks the program execution until a shutdown signal is received.</li>
                        <li><span class="color-red font-bold">Shutdown</span>: Shutdown a previously initialized context. This will also shutdown the global executor.</li>
                    </ul>
                    <pre class="language-python"><code>def main(args=None):
    rclpy.init(args=args)
                        
    try:
        minimal_publisher = MinimalPublisher()
                        
        rclpy.spin(minimal_publisher)
    except KeyboardInterrupt:
        pass
    except ExternalShutdownException:
        sys.exit(1)</code></pre>
                    <h3>Node Class</h3>
                    <p>A node class consists of a constructor and a callback function.</p>
                    <div class="display-flex">
                        <ul><span class="font-bold color-red">Constructor</span>
                            <li>Creating a publisher</li>
                            <li>Timer</li>
                        </ul>
                        <ul><span class="font-bold color-red">Callback function</span>
                            <li>Processing</li>
                        </ul>
                    </div>
                    <a href="https://github.com/ros2/examples/tree/rolling/rclpy/topics" class="txt-underline">https://github.com/ros2/examples/tree/rolling/rclpy/topics</a>
                    <p>Raw Link: <a href="https://raw.githubusercontent.com/vkjadon/test_pkg/refs/heads/main/test_pkg/test_publisher.py" class="txt-underline">https://raw.githubusercontent.com/vkjadon/test_pkg/refs/heads/main/test_pkg/test_publisher.py</a></p>
                    <pre class="language-python"><code>class MinimalPublisher(Node):

    def __init__(self):
        super().__init__('pubroot')
        self.publisher_ = self.create_publisher(String, 'topic', 10)
        timer_period = 0.5  # seconds
        self.timer = self.create_timer(timer_period, self.timer_callback)
        self.i = 0
                    
    def timer_callback(self):
        msg = String()
        msg.data = 'Hello World: %d' % self.i
        self.publisher_.publish(msg)
        self.get_logger().info('Publishing: "%s"' % msg.data)
        self.i += 1</code></pre>
                </section>

                <section id="ExecutingSamplePublisherNode">
                    <h2>Executing Sample Publisher Node<a
                        class="headerlink"
                        href="#ExecutingSamplePublisherNode"
                        title="Link to this heading"
                        ></a>
                    </h2>
                    <p>Go to <span class="color-blue font-bold">test_pkg</span></p>
                    <pre class="language-bash"><code>~ $ cd ros2_ws/src/test_pkg/test_pkg</code></pre>
                    <p>Download <span class="color-blue font-bold">test_publisher.py</span> into <span class="color-blue font-bold">test_pkg</span></p>
                    <pre class="language-bash"><code>/test_pkg$ wget https://raw.githubusercontent.com/vkjadon/ros2/master/test_publisher.py</code></pre>
                    <p>Ensure the <span class="color-blue font-bold">node_exe</span> node of <span class="color-blue font-bold">test_pkg</span> is running as usual</p>
                    <pre class="language-bash"><code>~/ros2_ws $ ros2 run test_pkg node_exe</code></pre>
                    <p>Update Entry Point for executing publisher node in <span class="color-blue font-bold">setup.py</span></p>
<pre class="language-python"><code>pub_exe=test_pkg.test_publisher:main
&lt;exec_depend&gt;rclpy&lt;/exec_depend&gt;
&lt;exec_depend&gt;std_msgs&lt;/exec_depend&gt;
</code></pre>
                    <p>Update dependencies in <span class="color-blue font-bold">package.xml</span></p>
                    <pre class="language-bash"><code>~/ros2_ws $ colcon build --packages-select test_pkg</code></pre>
                    <pre class="language-bash"><code>~/ros2_ws $ ros2 run test_pkg pub_exe</code></pre>
                    <p>Output:</p>
                    <p>Hello World: 1</p>
                    <p>Hello World: 2</p>
                    <p class="border-2px-solid-red">Do not forget to source the <span class="color-blue font-bold">setup.bash</span> or <span class="color-blue font-bold">local_setup.bash</span> before executing the node</p>
                </section>

                <!-- Skill Task Left -->
                <section id="SkillTask">
                  <h2>Skill Task<a
                    class="headerlink"
                    href="#SkillTask"
                    title="Link to this heading"
                    ></a>
                  </h2>
                  <ol class="border-2px-solid-red">
                    <li>Download Subscriber Node of file <span class="color-blue font-bold">test_subscriber.py</span> from <span class="color-blue font-bold">vkjadon/ros2</span> repository.</li>
                    <li>Do the required changes.</li>
                    <li>Build as a python package</li>
                    <li>Execute the subscriber in another terminal.</li>
                  </ol>
                  <p>Time : 10 min</p>
                  <h3>Skill Task : Solution</h3>
                  <p>Update Entry Point for executing subscriber node in <span class="color-blue font-bold">setup.py</span></p>
                  <p class="font-bold">sub_exe= test_pkg.test_subscriber:main</p>
                  <p>Nothing to be updated in <span class="color-blue font-bold">package.xml</span></p>
                  <pre class="language-bash"><code>~/ros2_ws $ colcon build --packages-select test_pkg</code></pre>
                  <pre class="language-bash"><code>~/ros2_ws $ source install/setup.bash</code></pre>
                  <pre class="language-bash"><code>~/ros2_ws $ ros2 run test_pkg sub_exe</code></pre>
                  <p class="border-2px-solid-red">Most common error here is that you may have not added <span class="color-red">coma (,)</span> after the last <span class="color-red">entry point</span> before adding any more <span class="color-red">entry points</span>. Each entry point should be separated by a <span class="color-red">coma (,)</span></p>
                  <h3>Localhost Only</h3>
                  <p>Open terminator. Split into grid of Four terminals. In First terminal build the package.</p>
                  <p>Terminal-2: Run <span class="color-blue font-bold">pub_exe</span></p>
                  <pre class="language-bash"><code>~/ros2_ws $[2] ros2 run test_pkg pub_exe</code></pre>
                  <p>Terminal-3: Run <span class="color-blue font-bold">sub_exe</span></p>
                  <pre class="language-bash"><code>~/ros2_ws $[3] ros2 run test_pkg sub_exe</code></pre>
                  <p class="border-2px-solid-red">Everyone is publishing on the same topic are on the same network. When everyone subscribe to same topic, will receive the information from all.</p>
                  <pre class="language-bash"><code>~/ros2_ws $[4] printenv</code></pre>
                  <pre class="language-bash"><code>~/ros2_ws $[4] printenv | grep ROS</code></pre>
                  <pre class="language-bash"><code>~$ echo “export ROS_LOCALHOST_ONLY=1” >> ~/.bashrc</code></pre>
                  <p class="border-2px-solid-red">Close all the terminals and reopen the terminator. Or, you can source <span class="color-blue font-bold">~/.bashrc</span> in every terminal. Run <span class="color-blue font-bold">pub_exe</span> and <span class="color-blue font-bold">sub_exe</span> in different terminals. This will restrict everyone to publish and subscribe to only local machine</p>

                  <h3>Using Domain ID</h3>
                  <pre class="language-bash"><code>~/ros2_ws $[4] printenv | grep ROS</code></pre>
                  <p>Set <span class="color-blue font-bold">ROS_LOCALHOST_ONLY</span> back to <span class="color-blue font-bold">0</span> in <span class="color-blue font-bold">.bashrc</span>. Now set the <span class="color-blue font-bold">ROS_DOMAIN_ID</span>.Let us set ID 1 for row 1, 2 for row 2 and so on.</p>
                  <pre class="language-bash"><code>~$ export ROS_DOMAIN_ID=1</code></pre>
                  <p>Add <span class="color-blue font-bold">ROS_DOMAIN_ID</span> in <span class="color-blue font-bold">~/.bashrc</span> so that it is set for every terminal we open.</p>
                  <pre class="language-bash"><code>~$ echo "export ROS_DOMAIN_ID=1" >> ~/.bashrc</code></pre>
                  <p class="border-2px-solid-red">Close all the terminals and reopen the terminator. Or, you can source <span class="color-blue font-bold">~/.bashrc</span> in every terminal.</p>
                  <pre class="language-bash"><code>~/ros2_ws $ printenv | grep ROS</code></pre>
                  <p>Run <span class="color-blue font-bold">pub_exe</span> and <span class="color-blue font-bold">sub_exe</span> in different terminals</p>
                  <p>This will restrict everyone to publish and subscribe to only machines with same <span class="color-blue font-bold">Domain_ID</span>.</p>
                </section>


                <!-- Thank You -->
                <p>Thank You. End of ROS2 Core Concepts Part-2.</p>
              </section>
            </div>
            <footer>
              <div
                class="rst-footer-buttons"
                role="navigation"
                aria-label="Footer"
              >
                <a
                  href="linux.html"
                  class="btn btn-neutral float-left"
                  title="Introduction of ROS"
                  accesskey="p"
                  rel="prev"
                  ><span
                    class="fa fa-arrow-circle-left"
                    aria-hidden="true"
                  ></span>
                  Previous</a
                >
                <a
                  href="#"
                  class="btn btn-neutral float-right"
                  title="Beginner: CLI tools"
                  accesskey="n"
                  rel="next"
                  >Next
                  <span
                    class="fa fa-arrow-circle-right"
                    aria-hidden="true"
                  ></span
                ></a>
              </div>

              <hr />

              <div role="contentinfo">
                <p>Copyright &#169; 2024, Dr. Vijay Kumar Jadon</p>
                <p>
                  <a href="https://yogeshverma1296.github.io/" target="_blank"
                    >Developed by Yogesh Verma</a
                  >
                </p>
              </div>
            </footer>
          </div>
        </div>
      </section>
    </div>
    <script>
      jQuery(function () {
        SphinxRtdTheme.Navigation.enable(true);
      });
    </script>
  </body>
</html>
